(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a9a2"],{bbe1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"维修记录"}},[a("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.jump_pair_open(null)}}},[t._v("维修开单")])],1),a("el-col",{attrs:{span:5}},[a("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"create_time",label:"开单时间"}}),a("el-table-column",{attrs:{prop:"kduser.name",label:"开单人"}}),a("el-table-column",{attrs:{prop:"json.car_num",label:"车牌号"}}),a("el-table-column",{attrs:{prop:"json.dirver",label:"司机姓名"}}),a("el-table-column",{attrs:{prop:"json.tel",label:"司机联系电话"}}),a("el-table-column",{attrs:{prop:"json.lpj_total",label:"零配件费"}}),a("el-table-column",{attrs:{prop:"json.gsf_total",label:"工时费"}}),a("el-table-column",{attrs:{prop:"json.total_money",label:"费用合计"}}),a("el-table-column",{attrs:{prop:"json.msg",label:"备注",width:"250"}}),a("el-table-column",{attrs:{label:"操作",width:"280",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.pair_detail(e.row.id)}}},[t._v("查看单据")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"padding-top":"60px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}})],1)],1)],1)},r=[],l={data:function(){return{export_date:[],total:0,size:10,date_range:"",search_key:"",tableData:[],all_repair:[]}},mounted:function(){this._load()},methods:{jump_page:function(t){var e=this,a=(t-1)*e.size,n=t*e.size;this.tableData=this.all_repair.slice(a,n)},search:function(){this.tableData=this.search_func(this.all_repair)},search_func:function(t){var e=[];for(var a in t){var n=t[a];n=JSON.stringify(n),n.indexOf(this.search_key)>0&&(n=JSON.parse(n),e.push(n))}return console.log("搜索结果",e),e},get_date_range:function(t){var e=this;console.log(t),this.export_date=t,this.http.get("admin/car_repaire/get_repaire?start="+t[0]+"&end="+t[1]).then((function(t){e.tableData=t.data}))},reset:function(){this.search_key="",this.date_range="",this._load()},del:function(t){var e=this;this.$confirm("确定删除该单据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/car_repaire/del_repaire?id="+t).then((function(t){e.$message({message:"删除成功",type:"success"}),e._load()}))}))},_load:function(){var t=this;this.http.get("admin/car_repaire/get_repaire").then((function(e){t.total=e.data.length,t.all_repair=e.data,t.tableData=e.data.slice(0,t.size)}))},filterHandler:function(t,e,a){var n=a["property"];return e[n]===t},pair_detail:function(t){this.$router.push({path:"/pair_show",query:{id:t}})},jump_pair_open:function(){this.$router.push({path:"/pair_open"})},add:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},handleChange:function(t){console.log(t)}}},i=l,o=a("cba8"),s=Object(o["a"])(i,n,r,!1,null,null,null);e["default"]=s.exports}}]);