(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2241c39e"],{"9dac":function(t,e,l){"use strict";var i=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{},[l("el-upload",{attrs:{action:"#","list-type":"picture-card","auto-upload":!0,multiple:!0,limit:t.limit,action:t.action,"before-upload":t.beforeUpload,"on-success":t.handleAvatarSuccess,name:"img","file-list":t.file_list,"on-remove":t.handleRemove}},[l("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),l("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[l("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},o=[],a=l("a49b"),s={data:function(){return{action:this.$getimg+"admin/common/upload_img",dialogImageUrl:"",dialogVisible:!1,disabled:!1,getimg:this.$getimg,imageUrl:"",img_list:[],file_list:[]}},props:["limit"],methods:{get_img_list:function(){this.$emit("img_list",this.img_list)},handleAvatarSuccess:function(t){console.log(t),console.log(this.file_list);var e={id:t.data.id,url:t.data.url};this.img_list.push(e),this.$emit("img_list",this.img_list)},beforeUpload:function(){if(a["b"])return this.$message({message:"演示版",type:"error",duration:5e3}),!1},handleRemove:function(t){console.log(t);var e=t.response.data.id;for(var l in this.img_list){var i=this.img_list[l];1*e==1*i.id&&(this.img_list.splice(l,1),this.$emit("img_list",this.img_list))}},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleDownload:function(t){console.log(t)}}},r=s,n=l("cba8"),u=Object(n["a"])(r,i,o,!1,null,null,null);e["a"]=u.exports},b843:function(t,e,l){"use strict";l.r(e);var i=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"root"},[l("el-tabs",{attrs:{type:"border-card"}},[l("el-tab-pane",{attrs:{label:"员工管理"}},[l("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[l("el-col",{attrs:{span:3}},[l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.add("worker")}}},[t._v("新增员工")])],1),l("el-col",{attrs:{span:6}},[l("el-select",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.car_list,(function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),l("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("搜索")]),l("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("重置")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.worker_list,border:""}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{prop:"name",label:"姓名"}}),l("el-table-column",{attrs:{prop:"sex",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(0==e.row.sex?"女":"男")+"\n\t\t\t\t\t")]}}])}),l("el-table-column",{attrs:{prop:"mobile",label:"联系电话(账号)"}}),l("el-table-column",{attrs:{prop:"work",label:"职务"}}),l("el-table-column",{attrs:{prop:"group_id",label:"所在部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(t.change_group[e.row.group_id])+"\n\t\t\t\t\t")]}}])}),l("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(l){return t.edit(e.row,"worker")}}},[t._v("修改")]),l("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(l){return t.del_worker(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),l("el-tab-pane",{attrs:{label:"部门管理"}},[l("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[l("el-col",{attrs:{span:2}},[l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.add_group()}}},[t._v("新增部门")])],1),l("el-col",{attrs:{span:6}},[l("el-select",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.car_list,(function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),l("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("搜索")]),l("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("重置")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.group_list,border:""}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{prop:"title",label:"部门名称"}}),l("el-table-column",{attrs:{prop:"rule_name",label:"部门权限"}}),l("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(l){return t.edit_group(e.row)}}},[t._v("修改")]),l("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(l){return t.del_group(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),l("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[l("userForm",{ref:"userform",attrs:{type:t.form_type,edit:t.edit_data,group_list:t.group_list,is_edit:t.is_edit,rule_list:t.rule_list},on:{get_form_data:t.get_form_data}}),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t.is_edit?l("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit}},[t._v("修改")]):l("el-button",{attrs:{type:"primary"},on:{click:t.sub_add}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:t.is_edit?"修改部门":"新增部门",visible:t.dialogVisible_group,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible_group=e}}},[l("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"部门名称"}},[l("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),l("el-form-item",{attrs:{label:"权限"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择权限"},model:{value:t.form.rules,callback:function(e){t.$set(t.form,"rules",e)},expression:"form.rules"}},t._l(t.rule_list,(function(t){return l("el-option",{key:t.value,attrs:{label:t.group,value:t.id}})})),1)],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogVisible_group=!1}}},[t._v("取 消")]),t.is_edit?l("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit_group}},[t._v("修改")]):l("el-button",{attrs:{type:"primary"},on:{click:t.sub_add_group}},[t._v("确 定")])],1)],1)],1)},o=[],a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"姓名"}},[l("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),l("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"性别"}},[l("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[l("el-radio",{attrs:{label:1}},[t._v("男")]),l("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1),l("el-form-item",{attrs:{label:"联系电话(账号)","label-width":"150px"}},[l("el-input",{model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),t.is_edit?t._e():l("el-form-item",{attrs:{label:"密码"}},[l("el-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),l("el-form-item",{attrs:{label:"职务"}},[l("el-input",{model:{value:t.form.work,callback:function(e){t.$set(t.form,"work",e)},expression:"form.work"}})],1),"worker"==t.type?l("el-form-item",{attrs:{label:"部门"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择员工部门"},model:{value:t.form.group_id,callback:function(e){t.$set(t.form,"group_id",e)},expression:"form.group_id"}},t._l(t.group_list,(function(t,e){return l("el-option",{attrs:{label:t.title,value:t.id}})})),1)],1):t._e(),"dirver"==t.type?l("el-form-item",{attrs:{label:"驾驶车辆"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择车辆"},model:{value:t.form.car,callback:function(e){t.$set(t.form,"car",e)},expression:"form.car"}},[l("el-option",{attrs:{label:"贵AA1234",value:"shanghai"}}),l("el-option",{attrs:{label:"贵EE4876",value:"beijing"}})],1)],1):t._e(),"dirver"==t.type?l("el-form-item",{staticStyle:{"text-align":"left"},attrs:{"label-width":"130px",label:"证件照(包括身份证正反面,营运证,驾驶证,行驶证照片)"}},[l("Upload")],1):t._e()],1)],1)},s=[],r=l("9dac"),n={props:["type","edit","group_list","is_edit","rule_list"],components:{Upload:r["a"]},data:function(){return{form:{}}},watch:{type:function(t,e){console.log(t)},edit:function(t,e){console.log(t),this.form=t}},created:function(){this.form=this.edit},methods:{get_form_data:function(){var t=this.is_edit;this.$emit("get_form_data",this.form,t)}}},u=n,c=l("cba8"),d=Object(c["a"])(u,a,s,!1,null,null,null),m=d.exports,p={components:{userForm:m},data:function(){return{form:{},rule_list:[],is_edit:!1,value:"",edit_data:{},dialogVisible:!1,dialogVisible_group:!1,form_type:"add",worker_list:[],group_list:[],change_group:[],car_list:[]}},watch:{dialogVisible:function(t,e){t||(this.form_type="add",this.edit_data={},this.is_edit=!1)},dialogVisible_group:function(t,e){t||(this.is_edit=!1,this.form={})}},mounted:function(){this._load()},methods:{add_group:function(){this.is_edit=!1,this.dialogVisible_group=!0},sub_add_group:function(){var t=this;console.log(this.form),this.http.post_show("admin/auth/group/add_group",this.form).then((function(e){t.$message({type:"success",message:"添加成功!"}),t.dialogVisible_group=!1,t._load()}))},sub_edit_group:function(){var t=this;this.http.post_show("admin/auth/group/update_group",this.form).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.dialogVisible_group=!1,t._load()}))},edit_group:function(t){this.is_edit=!0,this.dialogVisible_group=!0,this.form=t},sub_edit:function(){this.$refs.userform.get_form_data()},sub_add:function(){this.$refs.userform.get_form_data()},get_form_data:function(t,e){var l=this;console.log("子组件传的值：",t,e),e?this.http.post_show("admin/user/update_user",t).then((function(t){l.$message({type:"success",message:"修改成功!"}),l.dialogVisible=!1,l._load()})):this.http.post_show("admin/user/add_user",t).then((function(t){l.$message({type:"success",message:"添加成功!"}),l.dialogVisible=!1,l._load()}))},del_group:function(t){var e=this;console.log(t),this.$confirm("确定删除该部门？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/auth/group/del_group?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e._load()}))}))},_load:function(){var t=this,e={};this.http.get("admin/user/get_user").then((function(e){t.worker_list=e.data})),this.http.get("admin/auth/group/get_group?type=1").then((function(l){for(var i in t.group_list=l.data,l.data)e[l.data[i].id]=l.data[i].title;t.change_group=e,console.log(e)})),this.http.get("admin/auth/rule/get_rule").then((function(e){t.rule_list=e.data}))},edit:function(t,e){this.form_type=e,this.edit_data=t,this.is_edit=!0,this.dialogVisible=!0},del_worker:function(t){var e=this;this.$confirm("确定删除该用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/user/del_user?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e._load()}))}))},add:function(t){this.form_type=t,this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1,this.dialogVisible_group=!1}}},f=p,_=Object(c["a"])(f,i,o,!1,null,null,null);e["default"]=_.exports}}]);