(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-320ca550"],{7915:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("el-tabs",{attrs:{type:"border-card",value:t.active},on:{"tab-click":t.tab_change}},[n("el-tab-pane",{attrs:{label:"待派车计划",name:"1"}},[n("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.add_plan}},[t._v("新增计划")])],1),n("el-col",{attrs:{span:5}},[n("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),n("el-col",{attrs:{span:4}},[n("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dpc_table,border:""}},[n("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),n("el-table-column",{attrs:{align:"center",prop:"create_time",label:"创建时间"}}),n("el-table-column",{attrs:{align:"center",prop:"recorduser.name",label:"计划员"}}),n("el-table-column",{attrs:{align:"center",prop:"start",label:"起始地"}}),n("el-table-column",{attrs:{align:"center",prop:"end",label:"目的地"}}),n("el-table-column",{attrs:{align:"center",prop:"car_num",label:"计划车数"}}),n("el-table-column",{attrs:{align:"center",prop:"weight",label:"计划重量(吨)"}}),n("el-table-column",{attrs:{align:"center",prop:"massege",label:"备注"}}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"280",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.send_car(e.row.id,e.row.type,e.row.weight,e.row.car_num)}}},[t._v("调度车辆")]),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.edit_order(e.row)}}},[t._v("修改")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),n("el-tab-pane",{attrs:{label:"待装运计划",name:"2"}},[n("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[n("el-col",{attrs:{span:5}},[n("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),n("el-col",{attrs:{span:4}},[n("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dzy_table,border:""}},[n("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),n("el-table-column",{attrs:{align:"center",prop:"recorduser.name",label:"计划员",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"dduser.name",label:"调度员",width:"120"}}),n("el-table-column",{attrs:{align:"center",label:"调度时间",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.dd_json?[t._v("\n\t\t\t\t\t\t"+t._s(e.row.dd_json.dd_time)+"\n\t\t\t\t\t")]:void 0}}],null,!0)}),n("el-table-column",{attrs:{align:"center",prop:"order_num",label:"运单号",width:"140"}}),n("el-table-column",{attrs:{align:"center",prop:"start",label:"起始地",width:"180"}}),n("el-table-column",{attrs:{align:"center",prop:"end",label:"目的地",width:"180"}}),n("el-table-column",{attrs:{align:"center",prop:"car",label:"承运车辆",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.dd_json&&e.row.dd_json.car_info?[t._v("\n\t\t\t\t\t\t"+t._s(e.row.dd_json.car_info.car_num)+"\n\t\t\t\t\t")]:void 0}}],null,!0)}),n("el-table-column",{attrs:{align:"center",prop:"dirver",label:"司机姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.dd_json&&e.row.dd_json.car_info?[t._v("\n\t\t\t\t\t\t"+t._s(e.row.dd_json.car_info.drive_name)+"\n\t\t\t\t\t")]:void 0}}],null,!0)}),n("el-table-column",{attrs:{align:"center",prop:"tel",label:"司机联系电话",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.dd_json&&e.row.dd_json.car_info?[t._v("\n\t\t\t\t\t\t"+t._s(e.row.dd_json.car_info.mobile)+"\n\t\t\t\t\t")]:void 0}}],null,!0)}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.car_info.fleet",label:"所属车队"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.yz_num",label:"预装重量(吨)",width:"110"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.msg_money",label:"信息费"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.yk_money",label:"油卡金额"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.jy_money",label:"加油金额"}}),n("el-table-column",{attrs:{align:"center",prop:"massege",label:"备注",width:"150"}}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"250",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.jump_ydkd(e.row.id)}}},[t._v("开具运单")]),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.edit_dzy(e.row)}}},[t._v("修改")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),n("el-tab-pane",{attrs:{label:"已装运计划",name:"3"}},[n("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[n("el-col",{attrs:{span:5}},[n("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),n("el-col",{attrs:{span:4}},[n("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.yzy_table,border:""}},[n("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),n("el-table-column",{attrs:{align:"center",prop:"recorduser.name",label:"计划员",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"dduser.name",label:"调度员",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"json.create_time",label:"运单开具时间",width:"180"}}),n("el-table-column",{attrs:{align:"center",prop:"order_num",label:"运单号",width:"150"}}),n("el-table-column",{attrs:{align:"center",prop:"start",label:"起始地",width:"180px"}}),n("el-table-column",{attrs:{align:"center",prop:"end",label:"目的地",width:"180px"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.car_info.car_num",label:"承运车辆",width:"100"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.car_info.drive_name",label:"司机姓名"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.car_info.mobile",label:"司机联系电话",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.car_info.fleet",label:"所属车队"}}),n("el-table-column",{attrs:{align:"center",prop:"json.send_name",label:"发货人",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"json.send_tel",label:"发货人电话",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"json.received_name",label:"收货人",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"json.received_tel",label:"收货人电话",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"json.received_address",label:"收货人地址",width:"300"}}),n("el-table-column",{attrs:{align:"center",prop:"json.goods[0].name",label:"货物名称"}}),n("el-table-column",{attrs:{align:"center",prop:"json.goods[0].num",label:"件数"}}),n("el-table-column",{attrs:{align:"center",prop:"json.goods[0].weight",label:"重量(吨)"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.msg_money",label:"信息费"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.yk_money",label:"油卡金额"}}),n("el-table-column",{attrs:{align:"center",prop:"dd_json.jy_money",label:"加油金额"}}),n("el-table-column",{attrs:{align:"center",prop:"json.goods[0].unit_price",label:"单价"}}),n("el-table-column",{attrs:{align:"center",prop:"total_price",label:"运费合计"}}),n("el-table-column",{attrs:{align:"center",prop:"json.goods[0].name",label:"备注"}}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"350",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.order_show(e.row.id)}}},[t._v("查看运单")]),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.edit_yzy(e.row)}}},[t._v("修改")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),n("el-pagination",{staticStyle:{"padding-top":"60px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}}),n("el-dialog",{attrs:{title:"add"==t.plan_dialog_type?"新增计划":"修改计划",visible:t.plan_dialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.plan_dialog=e}}},[n("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:t.plan_form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"*始发地"}},[n("el-input",{model:{value:t.plan_form.start,callback:function(e){t.$set(t.plan_form,"start",e)},expression:"plan_form.start"}})],1),n("el-form-item",{attrs:{label:"*目的地"}},[n("el-input",{model:{value:t.plan_form.end,callback:function(e){t.$set(t.plan_form,"end",e)},expression:"plan_form.end"}})],1),n("el-form-item",{attrs:{label:"*计划类型"}},[n("el-radio",{attrs:{label:"1"},model:{value:t.plan_form.type,callback:function(e){t.$set(t.plan_form,"type",e)},expression:"plan_form.type"}},[t._v("按车数")]),n("el-radio",{attrs:{label:"2"},model:{value:t.plan_form.type,callback:function(e){t.$set(t.plan_form,"type",e)},expression:"plan_form.type"}},[t._v("按重量")])],1),n("el-form-item",{attrs:{label:"数量"}},[n("el-input",{model:{value:t.plan_form.num,callback:function(e){t.$set(t.plan_form,"num",e)},expression:"plan_form.num"}})],1),1==t.plan_form.type?n("el-form-item",{attrs:{label:"计划重量(吨)"}},[n("el-input",{model:{value:t.plan_form.weight,callback:function(e){t.$set(t.plan_form,"weight",e)},expression:"plan_form.weight"}})],1):t._e(),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{model:{value:t.plan_form.massege,callback:function(e){t.$set(t.plan_form,"massege",e)},expression:"plan_form.massege"}})],1)],1),t._v("\n\t\t注：带*号选项为必填，否则无法添加\n\t\t"),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.plan_dialog=!1}}},[t._v("取 消")]),"add"==t.plan_dialog_type?n("el-button",{attrs:{type:"primary"},on:{click:t.sub_add}},[t._v("确 定")]):n("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit_plan}},[t._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"修改订单",visible:t.order_dialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.order_dialog=e}}},[n("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:t.edit_dzy_form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"选择车辆"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择车辆"},model:{value:t.edit_dzy_form.car,callback:function(e){t.$set(t.edit_dzy_form,"car",e)},expression:"edit_dzy_form.car"}},t._l(t.select_car_list,(function(e,a){return 0==e.state?n("el-option",{attrs:{label:e.name,value:e.value}}):t._e()})),1)],1),n("el-form-item",{attrs:{label:"信息费"}},[n("el-input",{model:{value:t.edit_dzy_form.msg_money,callback:function(e){t.$set(t.edit_dzy_form,"msg_money",e)},expression:"edit_dzy_form.msg_money"}})],1),n("el-form-item",{attrs:{label:"预装吨位"}},[n("el-input",{model:{value:t.edit_dzy_form.yz_num,callback:function(e){t.$set(t.edit_dzy_form,"yz_num",e)},expression:"edit_dzy_form.yz_num"}})],1),0==t.edit_dzy_form.jy_money?n("el-form-item",{attrs:{label:"油卡金额"}},[n("el-input",{attrs:{placeholder:"0"},model:{value:t.edit_dzy_form.yk_money,callback:function(e){t.$set(t.edit_dzy_form,"yk_money",e)},expression:"edit_dzy_form.yk_money"}})],1):t._e(),0==t.edit_dzy_form.yk_money?n("el-form-item",{attrs:{label:"加油金额"}},[n("el-input",{attrs:{placeholder:"0"},model:{value:t.edit_dzy_form.jy_money,callback:function(e){t.$set(t.edit_dzy_form,"jy_money",e)},expression:"edit_dzy_form.jy_money"}})],1):t._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.order_dialog=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit_dzy}},[t._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"修改订单",visible:t.yzy_dialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.yzy_dialog=e}}},[n("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:t.edit_yzy_form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"选择车辆"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择车辆"},model:{value:t.edit_yzy_form.car,callback:function(e){t.$set(t.edit_yzy_form,"car",e)},expression:"edit_yzy_form.car"}},t._l(t.select_car_list,(function(e,a){return 0==e.state?n("el-option",{attrs:{label:e.name,value:e.value}}):t._e()})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.yzy_dialog=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit_yzy}},[t._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"车辆调度",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"运输方式"}},[n("el-radio-group",{model:{value:t.form.dd_json.type,callback:function(e){t.$set(t.form.dd_json,"type",e)},expression:"form.dd_json.type"}},[n("el-radio",{attrs:{label:0}},[t._v("整单运输")]),n("el-radio",{attrs:{label:1}},[t._v("拆单运输")]),n("el-radio",{attrs:{label:2}},[t._v("合单运输")])],1)],1),n("el-form-item",{attrs:{label:"计划重量"}},[t._v("\n\t\t\t\t"+t._s(1==t.form.dd_json.plan_type?t.plan_weight:t.get_plan_weight)+"\n\t\t\t")]),0==t.form.dd_json.type||1==t.form.dd_json.type&&1==t.form.dd_json.plan_type?n("el-form-item",{attrs:{label:"预装吨位"}},[n("el-input",{model:{value:t.form.dd_json.yz_num,callback:function(e){t.$set(t.form.dd_json,"yz_num",e)},expression:"form.dd_json.yz_num"}})],1):t._e(),1==t.form.dd_json.type&&2==t.form.dd_json.plan_type?n("el-form-item",{attrs:{label:"拆吨位"}},[n("el-input",{model:{value:t.form.dd_json.num,callback:function(e){t.$set(t.form.dd_json,"num",e)},expression:"form.dd_json.num"}})],1):t._e(),n("el-form-item",{attrs:{label:"选择车辆"}},[2==t.form.dd_json.type?[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"选择车辆"},on:{change:t.get_car_info},model:{value:t.form.dd_json.car,callback:function(e){t.$set(t.form.dd_json,"car",e)},expression:"form.dd_json.car"}},t._l(t.select_car_list,(function(t,e){return n("el-option",{attrs:{label:t.name,value:t.value}})})),1)]:[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"选择车辆"},on:{change:t.get_car_info},model:{value:t.form.dd_json.car,callback:function(e){t.$set(t.form.dd_json,"car",e)},expression:"form.dd_json.car"}},t._l(t.select_car_list,(function(e,a){return 0==e.state?n("el-option",{attrs:{label:e.name,value:e.value}}):t._e()})),1)]],2),t.form.dd_json.car?[n("el-form-item",{attrs:{label:"车辆信息"}},[t._v("\n\t\t\t\t\t类型："+t._s(t.car_info.model)),n("br"),t._v("\n\t\t\t\t\t栏高："+t._s(t.car_info.height)+"\n\t\t\t\t")]),n("el-form-item",{attrs:{label:"司机信息"}},[t._v("\n\t\t\t\t\t姓名："+t._s(t.car_info.drive_name)),n("br"),t._v("\n\t\t\t\t\t联系电话："+t._s(t.car_info.mobile)+"\n\t\t\t\t")])]:t._e(),n("el-form-item",{attrs:{label:"信息费"}},[n("el-input",{model:{value:t.form.dd_json.msg_money,callback:function(e){t.$set(t.form.dd_json,"msg_money",e)},expression:"form.dd_json.msg_money"}})],1),0==t.form.dd_json.jy_money?n("el-form-item",{attrs:{label:"油卡金额"}},[n("el-input",{attrs:{placeholder:"0"},model:{value:t.form.dd_json.yk_money,callback:function(e){t.$set(t.form.dd_json,"yk_money",e)},expression:"form.dd_json.yk_money"}})],1):t._e(),0==t.form.dd_json.yk_money?n("el-form-item",{attrs:{label:"加油金额"}},[n("el-input",{attrs:{placeholder:"0"},model:{value:t.form.dd_json.jy_money,callback:function(e){t.$set(t.form.dd_json,"jy_money",e)},expression:"form.dd_json.jy_money"}})],1):t._e(),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{model:{value:t.form.dd_json.msg,callback:function(e){t.$set(t.form.dd_json,"msg",e)},expression:"form.dd_json.msg"}})],1)],2),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.sub_dd}},[t._v("确 定")])],1)],1)],1)},r=[],l=(n("e186"),n("799e")),o=(n("a450"),{data:function(){return{export_date:[],excel_url:"",edit_yzy_id:0,edit_yzy_form:{car:0},yzy_dialog:!1,radio_dis:!1,plan_weight:0,search_key:"",get_img:this.$getimg,active:"0",size:10,total:0,date_range:"",value:"",car_list:[],dialogVisible:!1,order_dialog:!1,form:{id:"",dd_json:{jy_money:"",yk_money:"",type:0,num:1}},edit_form:{},plan_form:{massege:""},plan_dialog:!1,tableData:[],dpc_table:[],dzy_table:[],yzy_table:[],ywc_table:[],plan_dialog_type:"add",select_car_list:[],car_info:"",plan_id:0,edit_dzy_form:{car:0,jy_money:0,yk_money:0,msg_money:0,yz_num:0},all_dpc:[],all_dzy:[],all_yzy:[],all_ywc:[]}},computed:{get_plan_weight:function(){var t=1*this.plan_weight;return 1==this.form.dd_json.type&&this.form.dd_json.num&&(t=1*this.plan_weight-1*this.form.dd_json.num),t<0?0:t}},watch:{active:function(t){console.log("sdasda:",t),t&&this.change_page_num(t)},plan_dialog:function(t,e){t||(this.plan_form={massege:""},this.plan_dialog_type="add")},dialogVisible:function(t,e){t||(this.form={id:"",dd_json:{jy_money:0,yk_money:0,type:0}})}},mounted:function(){var t=localStorage.getItem("active_tab");t&&(this.active=t),this._load(),this.get_all_car()},methods:{change_page_num:function(t){var e=[];"1"==t&&(e=this.all_dpc,this.total=e.length,this.dpc_table=e.slice(0,this.size)),"2"==t&&(e=this.all_dzy,this.total=e.length,this.dzy_table=e.slice(0,this.size)),"3"==t&&(e=this.all_yzy,this.total=e.length,this.yzy_table=e.slice(0,this.size)),"4"==t&&(e=this.all_ywc,this.total=e.length,this.ywc_table=e.slice(0,this.size))},del_dzy:function(t){},search:function(){"1"==this.active&&(this.dpc_table=this.search_func(this.all_dpc)),"2"==this.active&&(this.dzy_table=this.search_func(this.all_dzy)),"3"==this.active&&(this.yzy_table=this.search_func(this.all_yzy)),"4"==this.active&&(this.ywc_table=this.search_func(this.all_ywc))},search_func:function(t){var e=[];for(var n in t){var a=t[n];a=JSON.stringify(a),a.indexOf(this.search_key)>0&&(a=JSON.parse(a),e.push(a))}return console.log("搜索结果",e),e},reset:function(){this.search_key="",this.date_range="",this._load()},get_date_range:function(t){var e=this;console.log(t),this.export_date=t;var n=[],a=[],r=[],l=[];this.http.get("admin/plan/get_plan?start="+t[0]+"&end="+t[1]+"&type="+1*(this.active-1)).then((function(t){if(console.log("时间段的计划：",t.data),t.data){for(var o in t.data){var i=t.data[o];0==i.status&&"1"==e.active&&n.push(i),1==i.status&&"2"==e.active&&a.push(i),2==i.status&&"3"==e.active&&r.push(i),3==i.status&&"4"==e.active&&(i["preview_list"]=[],i.preview_list.push(e.get_img+i.sign_img),l.push(i))}e.dpc_table=n,e.dzy_table=a,e.yzy_table=r,e.ywc_table=l,console.log("xxxx")}}))},tab_change:function(t){console.log(t),this.date_range="",this.active=t.name,localStorage.setItem("active_tab",t.name)},jump_page:function(t){var e=this,n=(t-1)*e.size,a=t*e.size;console.log(n,a),"1"==this.active&&(this.dpc_table=this.all_dpc.slice(n,a)),"2"==this.active&&(this.dzy_table=this.all_dzy.slice(n,a)),"3"==this.active&&(this.yzy_table=this.all_yzy.slice(n,a)),"4"==this.active&&(this.ywc_table=this.all_ywc.slice(n,a))},edit_dzy:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.get_all_car();case 2:this.edit_dzy_id=e.id,this.edit_dzy_form.id=e.id,this.edit_dzy_form.car=e.dd_json.car,this.edit_dzy_form.msg_money=e.dd_json.msg_money,this.edit_dzy_form.yk_money=e.dd_json.yk_money,this.edit_dzy_form.jy_money=e.dd_json.jy_money,this.edit_dzy_form.yz_num=e.dd_json.yz_num,console.log(this.edit_dzy_form),this.order_dialog=!0;case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),edit_yzy:function(t){this.edit_yzy_id=t.id,this.yzy_dialog=!0},sub_edit_dzy:function(){var t=this;console.log(this.edit_dzy_form),this.http.post_show("admin/plan/update_wait_car",this.edit_dzy_form).then((function(e){t.$message({type:"success",message:"修改成功!"}),t._load(),t.order_dialog=!1}))},sub_edit_yzy:function(){var t=this;this.http.put_show("admin/plan/update_plan_car?id="+this.edit_yzy_id+"&car_id="+this.edit_yzy_form.car).then((function(e){t.$message({type:"success",message:"修改成功!"}),t._load(),t.yzy_dialog=!1}))},sub_dd:function(){var t=this;this.form.id=this.plan_id,this.form.dd_json.car_info=this.car_info,1==this.form.dd_json.type&&1==this.form.dd_json.plan_type&&(this.form.dd_json.num=1),this.form.dd_json.weight=this.get_plan_weight,this.http.post_show("admin/plan/dd_car_one",this.form).then((function(e){t.$message({type:"success",message:"调度成功!"}),t.dialogVisible=!1,t._load(),t.get_all_car()}))},get_car_info:function(t){for(var e in console.log(t),this.car_list){var n=this.car_list[e];t==n.id&&(this.car_info=n)}},sub_edit_plan:function(){var t=this;this.http.post_show("admin/plan/update_plan",this.plan_form).then((function(e){t.$message({type:"success",message:"修改成功!"}),t._load(),t.plan_dialog=!1}))},sub_add:function(){var t=this;this.plan_form.start&&this.plan_form.end?this.http.post_show("admin/plan/add_plan",this.plan_form).then((function(e){t._load(),t.plan_dialog=!1})):this.$message({type:"warning",message:"未填写始发地"})},_load:function(){var t=this,e=[],n=[],a=[],r=[];this.http.get("admin/plan/get_plan").then((function(l){for(var o in l.data){var i=l.data[o];0==i.status&&e.push(i),1==i.status&&n.push(i),2==i.status&&a.push(i),3==i.status&&(i["preview_list"]=[],i.preview_list.push(t.get_img+i.sign_img),r.push(i))}t.dpc_table=e,t.all_dpc=e,t.dzy_table=n,t.all_dzy=n,t.yzy_table=a,t.all_yzy=a,t.ywc_table=r,t.all_ywc=r,console.log(t.dpc_table),console.log(t.dzy_table),console.log(t.yzy_table),console.log(t.ywc_table);var s=localStorage.getItem("active_tab");t.active=s||"1"}))},get_all_car:function(){var t=this,e=[];this.http.get("admin/car/get_all_car").then((function(n){for(var a in n.data){var r=n.data[a];e.push({name:r.car_num,value:r.id,state:r.state})}t.select_car_list=e,t.car_list=n.data}))},filterHandler:function(t,e,n){var a=n["property"];return e[a]===t},order_show:function(t){this.$router.push({path:"/order_show",query:{id:t}})},add_plan:function(){this.plan_dialog=!0},jump_ydkd:function(t){this.$router.push({path:"/order_open",query:{id:t}})},edit_order:function(t){console.log(t),this.plan_form=t,this.plan_dialog_type="edit",this.plan_form.type=t.type+"","1"==this.plan_form.type?this.plan_form.num=t.car_num:this.plan_form.num=t.num,this.plan_dialog=!0},del:function(t){var e=this;this.$confirm("确定删除该计划？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/plan/del_plan?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e._load(),e.get_all_car()}))}))},send_car:function(t,e,n,a){this.plan_weight=n,this.plan_id=t,this.form.dd_json.plan_type=e,1==e?a>1?(this.form.dd_json.type=1,this.radio_dis=!0):(this.form.dd_json.type=0,this.radio_dis=!0):(this.form.dd_json.type=1,this.radio_dis=!0),this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1,this.order_dialog=!1,this.plan_dialog=!1,this.yzy_dialog=!1}}}),i=o,s=n("cba8"),c=Object(s["a"])(i,a,r,!1,null,null,null);e["default"]=c.exports},"799e":function(t,e,n){"use strict";function a(t,e,n,a,r,l,o){try{var i=t[l](o),s=i.value}catch(c){return void n(c)}i.done?e(s):Promise.resolve(s).then(a,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,l){var o=t.apply(e,n);function i(t){a(o,r,l,i,s,"next",t)}function s(t){a(o,r,l,i,s,"throw",t)}i(void 0)}))}}n.d(e,"a",(function(){return r}))},e186:function(t,e,n){var a=function(t){"use strict";var e,n=Object.prototype,a=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},l=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(N){s=function(t,e,n){return t[e]=n}}function c(t,e,n,a){var r=e&&e.prototype instanceof h?e:h,l=Object.create(r.prototype),o=new E(a||[]);return l._invoke=x(t,n,o),l}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=c;var _="suspendedStart",u="suspendedYield",p="executing",m="completed",f={};function h(){}function y(){}function g(){}var b={};s(b,l,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(O([])));w&&w!==n&&a.call(w,l)&&(b=w);var j=g.prototype=h.prototype=Object.create(b);function z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(r,l,o,i){var s=d(t[r],t,l);if("throw"!==s.type){var c=s.arg,_=c.value;return _&&"object"===typeof _&&a.call(_,"__await")?e.resolve(_.__await).then((function(t){n("next",t,o,i)}),(function(t){n("throw",t,o,i)})):e.resolve(_).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,i)}))}i(s.arg)}var r;function l(t,a){function l(){return new e((function(e,r){n(t,a,e,r)}))}return r=r?r.then(l,l):l()}this._invoke=l}function x(t,e,n){var a=_;return function(r,l){if(a===p)throw new Error("Generator is already running");if(a===m){if("throw"===r)throw l;return C()}n.method=r,n.arg=l;while(1){var o=n.delegate;if(o){var i=S(o,n);if(i){if(i===f)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===_)throw a=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var s=d(t,e,n);if("normal"===s.type){if(a=n.done?m:u,s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=m,n.method="throw",n.arg=s.arg)}}}function S(t,n){var a=t.iterator[n.method];if(a===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(a,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var l=r.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function O(t){if(t){var n=t[l];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){while(++r<t.length)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:C}}function C(){return{value:e,done:!0}}return y.prototype=g,s(j,"constructor",g),s(g,"constructor",y),y.displayName=s(g,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,i,"GeneratorFunction")),t.prototype=Object.create(j),t},t.awrap=function(t){return{__await:t}},z(k.prototype),s(k.prototype,o,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,a,r,l){void 0===l&&(l=Promise);var o=new k(c(e,n,a,r),l);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},z(j),s(j,i,"Generator"),s(j,l,(function(){return this})),s(j,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var a=e.pop();if(a in t)return n.value=a,n.done=!1,n}return n.done=!0,n}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return i.type="throw",i.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var l=this.tryEntries.length-1;l>=0;--l){var o=this.tryEntries[l],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=e&&e<=l.finallyLoc&&(l=null);var o=l?l.completion:{};return o.type=t,o.arg=e,l?(this.method="next",this.next=l.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:O(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=a}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}}]);