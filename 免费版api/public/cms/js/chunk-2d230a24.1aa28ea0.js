(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230a24"],{ecb2:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("el-tabs",{attrs:{value:t.active,type:"border-card"},on:{"tab-click":t.tab_change}},[i("el-tab-pane",{attrs:{label:"加油管理",name:"1"}},[i("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[i("el-col",{attrs:{span:1}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.add_gas}},[t._v("加油")])],1),i("el-col",{attrs:{span:5}},[i("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),i("el-col",{attrs:{span:4}},[i("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.add_oil_list,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),i("el-table-column",{attrs:{prop:"create_time",label:"加油时间"}}),i("el-table-column",{attrs:{prop:"operators.name",label:"加油员"}}),i("el-table-column",{attrs:{prop:"car.car_num",label:"加油车辆",width:"180"}}),i("el-table-column",{attrs:{prop:"car.drive_name",label:"司机姓名"}}),i("el-table-column",{attrs:{prop:"car.mobile",label:"司机联系电话"}}),i("el-table-column",{attrs:{prop:"price",label:"油价"}}),i("el-table-column",{attrs:{prop:"total",label:"本次加油金额"}}),i("el-table-column",{attrs:{prop:"num",label:"加油量(升)"}}),i("el-table-column",{attrs:{prop:"syye",label:"结存金额"}}),i("el-table-column",{attrs:{prop:"massege",label:"备注"}}),i("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){return t.edu_gas(e.row)}}},[t._v("修改")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.del_add_oil(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),i("el-dialog",{attrs:{title:"入库",visible:t.yk_dialogVisible,width:"40%","before-close":t.handleClose},on:{"update:visible":function(e){t.yk_dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.yk_form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"运输车辆"}},[i("el-input",{model:{value:t.yk_form.car_num,callback:function(e){t.$set(t.yk_form,"car_num",e)},expression:"yk_form.car_num"}})],1),i("el-form-item",{attrs:{label:"司机姓名"}},[i("el-input",{model:{value:t.yk_form.car_name,callback:function(e){t.$set(t.yk_form,"car_name",e)},expression:"yk_form.car_name"}})],1),i("el-form-item",{attrs:{label:"司机联系电话"}},[i("el-input",{model:{value:t.yk_form.mobile,callback:function(e){t.$set(t.yk_form,"mobile",e)},expression:"yk_form.mobile"}})],1),i("el-form-item",{attrs:{label:"入库数量(升)"}},[i("el-input",{model:{value:t.yk_form.num,callback:function(e){t.$set(t.yk_form,"num",e)},expression:"yk_form.num"}})],1),i("el-form-item",{attrs:{label:"柴油密度"}},[i("el-input",{model:{value:t.yk_form.density,callback:function(e){t.$set(t.yk_form,"density",e)},expression:"yk_form.density"}})],1),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{model:{value:t.yk_form.massege,callback:function(e){t.$set(t.yk_form,"massege",e)},expression:"yk_form.massege"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.yk_dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.gas_rk}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"加油",visible:t.dialogVisible,width:"40%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"加油车辆"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择加油车辆",filterable:""},on:{change:t.get_car_item_info},model:{value:t.form.car_id,callback:function(e){t.$set(t.form,"car_id",e)},expression:"form.car_id"}},t._l(t.car_list,(function(t,e){return i("el-option",{attrs:{label:t.car_num,value:t.id}})})),1)],1),t.form.car_id?i("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"车辆信息"}},[i("div",{staticClass:"car_info"},[i("el-row",[i("el-col",{attrs:{span:8}},[t._v("司机："+t._s(t.item_car_info.drive_name))]),i("el-col",{attrs:{span:8}},[t._v("联系电话："+t._s(t.item_car_info.mobile))])],1),i("el-row",[i("el-col",{attrs:{span:8}},[t._v("结存金额："+t._s(t.item_car_info.jyje?t.item_car_info.jyje:"0"))])],1)],1)]):t._e(),i("el-form-item",{attrs:{label:"油价"}},[i("el-input",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),i("el-form-item",{attrs:{label:"本次加油金额"}},[i("el-input",{model:{value:t.form.total,callback:function(e){t.$set(t.form,"total",e)},expression:"form.total"}})],1),i("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"本次加油量(升)"}},[t._v("\n\t\t\t\t合计"+t._s(t.gas_num?t.gas_num:"0")+"升\n\t\t\t")]),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{model:{value:t.form.massege,callback:function(e){t.$set(t.form,"massege",e)},expression:"form.massege"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t.is_update?i("el-button",{attrs:{type:"primary"},on:{click:t.sub_edu}},[t._v("修 改")]):i("el-button",{attrs:{type:"primary"},on:{click:t.sub_add}},[t._v("确 定")])],1)],1)],1)},l=[],s=(i("a450"),{data:function(){return{export_date:[],date_range:"",search_key:"",active:"1",yk_form:{},form:{},sell_form:{},sell_dialog:!1,dialogVisible:!1,yk_dialogVisible:!1,is_update:!1,yk_list:[],tableData:[],add_oil_list:[],car_list:[],item_car_info:{},sell_list:[],value:"",gas_stock:[],rk_record:[]}},watch:{dialogVisible:function(t,e){t||(this.form={})},yk_dialogVisible:function(t,e){t||(this.yk_form={})}},computed:{gas_num:function(){var t=0;return t=this.form.total/this.form.price,t.toFixed(2)},sell_total:function(){var t=0;return t=1*this.sell_form.num*(1*this.sell_form.price),t}},mounted:function(){this._load(),this.get_gas_stock(),this.get_gas_rk_record()},methods:{get_date_range:function(t){var e=this;console.log(t),this.export_date=t,"1"==this.active&&this.http.get("admin/oil/get_car_oil?start="+t[0]+"&end="+t[1]).then((function(t){e.add_oil_list=t.data})),"2"==this.active&&this.http.get("admin/oil/get_sale?start="+t[0]+"&end="+t[1]).then((function(t){e.sell_list=t.data})),"3"==this.active&&this.http.get("admin/oil/get_oil_appli?start="+t[0]+"&end="+t[1]).then((function(t){e.rk_record=t.data})),"4"==this.active&&this.http.get("admin/oil/get_oil?start="+t[0]+"&end="+t[1]).then((function(t){e.gas_stock=t.data}))},search:function(){"1"==this.active&&(this.add_oil_list=this.search_func(this.add_oil_list)),"2"==this.active&&(this.sell_list=this.search_func(this.sell_list)),"3"==this.active&&(this.rk_record=this.search_func(this.rk_record)),"4"==this.active&&(this.gas_stock=this.search_func(this.gas_stock))},search_func:function(t){var e=[];for(var i in t){var a=t[i];a=JSON.stringify(a),a.indexOf(this.search_key)>0&&(a=JSON.parse(a),e.push(a))}return console.log("搜索结果",e),e},reset:function(){var t=this;this.date_range="",this.search_key="","1"==this.active&&this.http.get("admin/oil/get_car_oil").then((function(e){t.add_oil_list=e.data})),"2"==this.active&&this.http.get("admin/oil/get_sale").then((function(e){t.sell_list=e.data})),"3"==this.active&&this.http.get("admin/oil/get_oil_appli").then((function(e){t.rk_record=e.data})),"4"==this.active&&this.http.get("admin/oil/get_oil").then((function(e){t.gas_stock=e.data}))},del_rk_gas:function(t){var e=this;this.$confirm("确定删除该条记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/oil/del_oil?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.get_gas_rk_record()}))}))},gas_rk:function(){var t=this;this.http.post_show("admin/oil/add_oil",this.yk_form).then((function(e){t.get_gas_rk_record(),t.yk_dialogVisible=!1,t.get_gas_stock()}))},get_gas_rk_record:function(){var t=this;this.http.get("admin/oil/get_oil_appli").then((function(e){t.rk_record=e.data}))},get_gas_stock:function(){var t=this;this.http.get("admin/oil/get_oil").then((function(e){t.gas_stock=e.data}))},del_add_oil:function(t){var e=this;this.$confirm("确定删除该条记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/oil/del_car_oil?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e._load()}))}))},del_sell_record:function(t){var e=this;this.$confirm("确定删除该条记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/oil/del_sale?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e._load()}))}))},add_sell:function(){var t=this;this.sell_form.total=this.sell_total,this.http.post_show("admin/oil/add_sale",this.sell_form).then((function(e){t.sell_dialog=!1,t._load()}))},_load:function(){var t=this;this.http.get("admin/oil/get_car_oil").then((function(e){t.add_oil_list=e.data})),this.http.get("admin/car/get_all_car").then((function(e){t.car_list=e.data})),this.http.get("admin/oil/get_sale").then((function(e){t.sell_list=e.data}))},sub_add:function(){var t=this;this.form.num=this.gas_num,this.form.yk_money=this.item_car_info.yk_money,this.form.jy_money=this.item_car_info.jyje,this.http.post_show("admin/oil/add_car_oil",this.form).then((function(e){t.dialogVisible=!1,t._load()}))},sub_edu:function(){var t=this;this.form.num=this.gas_num,this.form.yk_money=this.item_car_info.yk_money,this.form.jy_money=this.item_car_info.jyje,this.http.post_show("admin/oil/update_car_oil",this.form).then((function(e){t.dialogVisible=!1,t._load()}))},get_car_item_info:function(t){for(var e in this.car_list){var i=this.car_list[e];t==i.id&&(this.item_car_info=i,console.log(this.item_car_info))}},tab_change:function(t){this.active=t.name},sell_gas:function(){this.sell_dialog=!0,this.is_update=!1},sell_gas_update:function(t){this.sell_dialog=!0,this.is_update=!0;var e=this,i={id:t.id,massege:t.massege,num:t.num,price:t.price,total:t.total,username:t.username};e.sell_form=i},filterHandler:function(t,e,i){var a=i["property"];return e[a]===t},add_yk_gas:function(){this.yk_dialogVisible=!0,this.is_update=!1},update_yk_gas:function(t){this.yk_dialogVisible=!0,this.is_update=!0;var e=this,i={id:t.id,car_name:t.car_name,car_num:t.car_num,density:t.density,massege:t.massege,mobile:t.mobile,num:t.num};e.yk_form=i},add_gas:function(){this.dialogVisible=!0,this.is_update=!1},edu_gas:function(t){this.dialogVisible=!0,this.is_update=!0;var e=this,i={id:t.id,car_id:t.car_id,jy_money:t.jy_money,massege:t.massege,num:t.num,price:t.price,total:t.total,yk_money:t.yk_money};e.form=i},handleClose:function(){this.dialogVisible=!1,this.yk_dialogVisible=!1,this.sell_dialog=!1}}}),o=s,n=i("cba8"),r=Object(n["a"])(o,a,l,!1,null,null,null);e["default"]=r.exports}}]);