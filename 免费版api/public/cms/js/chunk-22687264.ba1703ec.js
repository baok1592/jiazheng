(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22687264"],{"6e47":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-tabs",{attrs:{type:"border-card",value:t.active},on:{"tab-click":t.tabs_change}},[i("el-tab-pane",{attrs:{label:"新闻",name:"2"}},[i("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.add_news}},[t._v("发布新闻")])],1),i("el-col",{attrs:{span:5}},[i("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),i("el-col",{attrs:{span:6}},[i("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.news_list,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),i("el-table-column",{attrs:{prop:"create_time",label:"发布时间"}}),i("el-table-column",{attrs:{prop:"title",label:"新闻标题"}}),i("el-table-column",{attrs:{prop:"authers.name",label:"发布人"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){return t.edit_news(e.row.id)}}},[t._v("修改")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.del_news(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),i("el-tab-pane",{attrs:{label:"通知",name:"3"}},[i("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.add_notice}},[t._v("发布通知")])],1),i("el-col",{attrs:{span:5}},[i("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),i("el-col",{attrs:{span:6}},[i("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.notice_list,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),i("el-table-column",{attrs:{prop:"create_time",label:"发布时间"}}),i("el-table-column",{attrs:{prop:"content",label:"通知内容"}}),i("el-table-column",{attrs:{prop:"operators.name",label:"发布人"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){return t.edit_notice(e.row)}}},[t._v("修改")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.del_notice(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),i("el-tab-pane",{attrs:{label:"首页广告",name:"4"}},[i("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.ad_dialog=!0}}},[t._v("发布广告")])],1),i("el-col",{attrs:{span:5}},[i("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),i("el-col",{attrs:{span:6}},[i("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ad_list,border:""}},[i("el-table-column",{attrs:{type:"index",label:"序号"}}),i("el-table-column",{attrs:{prop:"create_time",label:"发布时间"}}),i("el-table-column",{attrs:{prop:"content",label:"广告图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.getimg+e.row.url,alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"operators.name",label:"发布人"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){return t.edit_ad(e.row)}}},[t._v("修改")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.del_ad(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),i("el-dialog",{attrs:{title:t.is_edit?"修改通知":"发布通知",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"通知内容"}},[i("el-input",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t.is_edit?i("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit_notice}},[t._v("确 定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.sub_add_notice}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:t.is_edit?"修改广告":"发布广告",visible:t.ad_dialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.ad_dialog=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[i("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:t.is_edit?"广告图片（点击修改）":"广告图片"}},[t._l(t.img_list,(function(e){return i("img",{staticStyle:{width:"148px",height:"148px"},attrs:{src:t.getimg+e.url,alt:""}})})),t.is_edit&&t.img_list.length>0?i("i",{staticClass:"el-icon-circle-close",attrs:{slot:"default",size:"100"},on:{click:t.del_img},slot:"default"}):t._e(),0==t.img_list.length?i("Upload",{attrs:{limit:1},on:{img_list:t.get_img_list}}):t._e()],2)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.ad_dialog=!1}}},[t._v("取 消")]),t.is_edit?i("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit_ad}},[t._v("确 定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.sub_add_ad}},[t._v("确 定")])],1)],1)],1)},l=[],n=(i("a450"),i("9dac")),s={components:{Upload:n["a"]},data:function(){return{ad_form:{},ad_dialog:!1,getimg:this.$getimg,active:"2",list:[],is_edit:!1,dialogVisible:!1,form:{},date_range:"",search_key:"",news:[],notice_list:[],news_list:[],ad_list:[],number:0,img_list:[]}},mounted:function(){this.get_all_news(),this.get_all_notice(),this.get_all_ad()},watch:{dialogVisible:function(t){t||(this.is_edit=!1,this.form={})},ad_dialog:function(t){t||(this.is_edit=!1,this.ad_form={},this.img_list=[])},ad_form:function(t){this.ad_form=t,console.log(this.ad_form)}},methods:{sub_add_ad:function(){var t=this;this.ad_form.url=this.img_list[0].url,this.http.post_show("admin/banner/add_banner",this.ad_form).then((function(e){t.$message({type:"success",message:"添加成功!"}),t.ad_dialog=!1,t.get_all_ad()}))},sub_edit_ad:function(){var t=this;this.ad_form.url=this.img_list[0].url,this.http.post_show("admin/banner/update_banner",this.ad_form).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.ad_dialog=!1,t.get_all_ad()}))},del_img:function(){console.log("xxxx"),this.img_list.splice(0,1)},edit_ad:function(t){console.log(t);var e={};this.ad_form.id=t.id,e.url=t.url,this.img_list.push(e),this.is_edit=!0,this.ad_dialog=!0},get_img_list:function(t){console.log(t),this.img_list=t},del_ad:function(t){var e=this;this.$confirm("确定删除该广告","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/banner/del_banner?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.get_all_ad()}))}))},get_all_ad:function(){var t=this;this.http.get("admin/banner/get_all").then((function(e){t.ad_list=e.data}))},tabs_change:function(t){this.active=t.name},edit_news:function(t){this.$router.push({path:"/add_news",query:{id:t}})},add_news:function(){this.$router.push({path:"/add_news"})},sub_edit_notice:function(){var t=this;this.http.post_show("admin/notice/update_notice",this.form).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.dialogVisible=!1,t.get_all_notice()}))},add_notice:function(){this.dialogVisible=!0},sub_add_notice:function(){var t=this;this.http.post_show("admin/notice/add_notice",this.form).then((function(e){t.$message({type:"success",message:"添加成功!"}),t.dialogVisible=!1,t.get_all_notice()}))},edit_notice:function(t){this.form=t,this.is_edit=!0,this.dialogVisible=!0},del_news:function(t){var e=this;this.$confirm("确定删除该新闻","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.put_show("admin/article/del_article?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.get_all_news()}))}))},del_notice:function(t){var e=this;this.$confirm("确定删除该通知","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/notice/del_notice?id="+t).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.get_all_notice()}))}))},get_all_notice:function(){var t=this;this.http.get("admin/notice/get_notice").then((function(e){t.notice_list=e.data}))},get_all_news:function(){var t=this;this.http.get("admin/article/get_all_article").then((function(e){t.news_list=e.data}))},search:function(){},get_date_range:function(t){console.log(t),this.active},reset:function(){},onSubmit:function(){},handleClose:function(){this.dialogVisible=!1,this.news_dialog=!1,this.ad_dialog=!1}}},o=s,r=i("cba8"),c=Object(r["a"])(o,a,l,!1,null,null,null);e["default"]=c.exports},"9dac":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("el-upload",{attrs:{action:"#","list-type":"picture-card","auto-upload":!0,multiple:!0,limit:t.limit,action:t.action,"before-upload":t.beforeUpload,"on-success":t.handleAvatarSuccess,name:"img","file-list":t.file_list,"on-remove":t.handleRemove}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},l=[],n=i("a49b"),s={data:function(){return{action:this.$getimg+"admin/common/upload_img",dialogImageUrl:"",dialogVisible:!1,disabled:!1,getimg:this.$getimg,imageUrl:"",img_list:[],file_list:[]}},props:["limit"],methods:{get_img_list:function(){this.$emit("img_list",this.img_list)},handleAvatarSuccess:function(t){console.log(t),console.log(this.file_list);var e={id:t.data.id,url:t.data.url};this.img_list.push(e),this.$emit("img_list",this.img_list)},beforeUpload:function(){if(n["b"])return this.$message({message:"演示版",type:"error",duration:5e3}),!1},handleRemove:function(t){console.log(t);var e=t.response.data.id;for(var i in this.img_list){var a=this.img_list[i];1*e==1*a.id&&(this.img_list.splice(i,1),this.$emit("img_list",this.img_list))}},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleDownload:function(t){console.log(t)}}},o=s,r=i("cba8"),c=Object(r["a"])(o,a,l,!1,null,null,null);e["a"]=c.exports}}]);