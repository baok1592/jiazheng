(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-592069dc"],{"0a1b":function(t,s,e){"use strict";e("8842")},8842:function(t,s,e){},c4ce:function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"root"},[e("div",{staticClass:"noprint"},[e("div",{staticClass:"header_btn"},[e("el-button",{staticStyle:{margin:"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.back}},[t._v("返回")])],1)]),t._m(0),e("div",{staticClass:"table"},[e("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"1px"}},[e("col",{attrs:{width:"144"}}),e("col",{attrs:{width:"269"}}),e("col",{attrs:{width:"188"}}),e("col",{attrs:{width:"214"}}),e("col",{attrs:{width:"194"}}),e("col",{attrs:{width:"200"}}),e("col",{attrs:{width:"204"}}),e("col",{attrs:{width:"191"}}),e("tr",[e("td",{attrs:{width:"144"}},[t._v("运输日期：")]),e("td",{attrs:{width:"269"}},[t._v(t._s(t.plan_data.create_time)+"　")]),e("td",{attrs:{width:"188"}},[t._v("运单号：")]),e("td",{attrs:{width:"214"}},[t._v("　"+t._s(t.plan_data.order_num))]),e("td",{attrs:{width:"194"}},[t._v("始发地：")]),e("td",{attrs:{width:"200"}},[t._v("　"+t._s(t.plan_data.start))]),e("td",{attrs:{width:"204"}},[t._v("目的地：")]),e("td",{attrs:{width:"191"}},[t._v("　"+t._s(t.plan_data.end))])]),t._m(1),e("tr",[e("td",[t._v("车牌号：")]),e("td",[t._v(t._s(t.plan_data.dd_json?t.plan_data.dd_json.car_info.car_num:""))]),e("td",[t._v("发货单位：")]),e("td",[e("el-input",{attrs:{size:"mini"},model:{value:t.form.json.send_name,callback:function(s){t.$set(t.form.json,"send_name",s)},expression:"form.json.send_name"}})],1),e("td",[t._v("收货单位：")]),e("td",{attrs:{colspan:"3"}},[e("el-input",{attrs:{size:"mini"},model:{value:t.form.json.received_name,callback:function(s){t.$set(t.form.json,"received_name",s)},expression:"form.json.received_name"}})],1)]),e("tr",[e("td",[t._v("司机姓名：")]),e("td",[t._v(t._s(t.plan_data.dd_json?t.plan_data.dd_json.car_info.drive_name:""))]),e("td",[t._v("电话：")]),e("td",[e("el-input",{attrs:{size:"mini"},model:{value:t.form.json.send_tel,callback:function(s){t.$set(t.form.json,"send_tel",s)},expression:"form.json.send_tel"}})],1),e("td",[t._v("电话：")]),e("td",{attrs:{colspan:"3"}},[e("el-input",{attrs:{size:"mini"},model:{value:t.form.json.received_tel,callback:function(s){t.$set(t.form.json,"received_tel",s)},expression:"form.json.received_tel"}})],1)]),e("tr",[e("td",[t._v("联系电话：")]),e("td",[t._v(t._s(t.plan_data.dd_json?t.plan_data.dd_json.car_info.mobile:""))]),e("td",[t._v("地址：")]),e("td",[e("el-input",{attrs:{size:"mini"},model:{value:t.form.json.send_address,callback:function(s){t.$set(t.form.json,"send_address",s)},expression:"form.json.send_address"}})],1),e("td",[t._v("地址：")]),e("td",{attrs:{colspan:"3"}},[e("el-input",{attrs:{size:"mini"},model:{value:t.form.json.received_address,callback:function(s){t.$set(t.form.json,"received_address",s)},expression:"form.json.received_address"}})],1)]),t._m(2),t._m(3),t._l(t.goods,(function(s,n){return e("tr",[e("td",[t._v(t._s(n+1))]),e("td",[e("el-input",{attrs:{size:"mini"},model:{value:t.goods[n].name,callback:function(s){t.$set(t.goods[n],"name",s)},expression:"goods[index].name"}})],1),e("td",[e("el-input",{attrs:{size:"mini"},model:{value:t.goods[n].num,callback:function(s){t.$set(t.goods[n],"num",s)},expression:"goods[index].num"}})],1),e("td",[e("el-input",{attrs:{size:"mini"},model:{value:t.goods[n].weight,callback:function(s){t.$set(t.goods[n],"weight",s)},expression:"goods[index].weight"}})],1),e("td",[e("el-input",{attrs:{size:"mini"},model:{value:t.goods[n].unit_price,callback:function(s){t.$set(t.goods[n],"unit_price",s)},expression:"goods[index].unit_price"}})],1),e("td",{attrs:{colspan:"3"}},[t._v("\n\t\t\t\t\t"+t._s(t.goods_price[n])+"\n\t\t\t\t\t")])])})),e("tr",{staticStyle:{"text-align":"left"}},[e("td",{attrs:{colspan:"7",rowspan:"2"}},[t._v("\n\t\t\t\t\t备注："),e("br"),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.json.dj_msg,expression:"form.json.dj_msg"}],staticStyle:{"min-width":"100%","min-height":"150px"},domProps:{value:t.form.json.dj_msg},on:{input:function(s){s.target.composing||t.$set(t.form.json,"dj_msg",s.target.value)}}})]),e("td",{attrs:{rowspan:"2"}})]),e("tr"),t._m(4)],2)]),e("div",{staticClass:"btn"},[e("div",{staticClass:"noprint"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.plus_goods_num}},[t._v("货物数量+")]),t.goods.length>1?e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reduce_goods_num}},[t._v("货物数量-")]):t._e(),t.goods.length>1?e("span",[t._v("（注：货物数量不满3请点击此处减掉，表格不能留空）")]):t._e(),e("el-button",{staticStyle:{"margin-left":"77%"},attrs:{type:"primary",size:"mini"},on:{click:t.sub_kd}},[t._v("提交")])],1)]),e("div",{staticClass:"noprint",staticStyle:{height:"80px"}})])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("div",{staticClass:"header_item"}),e("div",{staticClass:"header_item"},[e("span",[t._v("物流运输车辆管理系统")])]),e("div",{staticClass:"header_item"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",{staticStyle:{"font-weight":"600"}},[e("td",{attrs:{colspan:"2"}},[t._v("承运车辆信息")]),e("td",{attrs:{colspan:"2"}},[t._v("发货方信息")]),e("td",{attrs:{colspan:"4"}},[t._v("收货方信息")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("td",{attrs:{colspan:"8"}},[t._v("货物信息")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("td",[t._v("序号")]),e("td",[t._v("货物名称")]),e("td",[t._v("件数")]),e("td",[t._v("重量（吨）")]),e("td",[t._v("单价")]),e("td",{attrs:{colspan:"3"}},[t._v("运费合计")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("td",[t._v("开单人签字：")]),e("td"),e("td",[t._v("发货人签字：")]),e("td"),e("td",[t._v("收货人签字：")]),e("td"),e("td",[t._v("驾驶员签字：")]),e("td")])}],o={data:function(){return{price_arr:[],plan_data:{},goods_num:1,form:{json:{}},goods:[1],plan_id:0}},computed:{get_goods_num:function(){for(var t=this,s=[],e=0;e<t.goods_num;e++)s.push({name:"",num:"",weight:"",unit_price:"",yf:""});return s},goods_price:function(){var t=[];for(var s in this.goods){var e=this.goods[s];t.push(1*(1*e.weight*(1*e.unit_price)).toFixed(2)),e.yf=1*e.weight*(1*e.unit_price),e.yf=1*e.yf.toFixed(2)}return console.log(t),this.price_arr=t,t}},mounted:function(){console.log(this.goods=this.get_goods_num),this.plan_id=this.$route.query.id,this.get_plan()},methods:{get_plan:function(){var t=this;this.http.get("admin/plan/get_plan?id="+this.plan_id).then((function(s){t.plan_data=s.data}))},do_print:function(){window.print()},sub_kd:function(){var t=this;for(var s in this.form.total_price=0,console.log(this.price_arr),this.form.id=this.plan_id,this.form.json["goods"]=this.goods,this.price_arr)console.log(this.price_arr[s]),this.form.total_price+=this.price_arr[s];console.log(this.form),this.form.json.received_address&&this.form.json.received_name&&this.form.json.received_tel?this.form.json.send_address&&this.form.json.send_tel&&this.form.json.send_name?this.$confirm("确定开具运单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.http.post_show("admin/plan/add_bill",t.form).then((function(s){t.$message({message:"开单成功",type:"success"}),setTimeout((function(){t.jump_print(s.data.id)}),2e3)}))})):this.$message({message:"发货方信息未填写完整",type:"warning"}):this.$message({message:"收货方信息未填写完整",type:"warning"})},jump_print:function(t){this.$router.push({path:"/order_show",query:{id:t}})},back:function(){this.$router.go(-1)},plus_goods_num:function(){this.goods.push({})},reduce_goods_num:function(){this.goods.splice(this.goods.length-1,1)}}},a=o,r=(e("0a1b"),e("cba8")),d=Object(r["a"])(a,n,i,!1,null,null,null);s["default"]=d.exports}}]);