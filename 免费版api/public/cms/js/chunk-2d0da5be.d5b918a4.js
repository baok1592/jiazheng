(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0da5be"],{"6aeb":function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"root"},[l("el-tabs",{attrs:{type:"border-card",value:t.active},on:{"tab-click":t.tab_change}},t._l(t.group_list,(function(e,a){return l("el-tab-pane",{attrs:{label:e.title,name:a+1+""}},[""==t.show_view?[l("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[l("el-col",{attrs:{span:5}},[l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.add_wp}},[t._v("新增物资")]),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.change_view("c")}}},[t._v("出库记录")]),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.change_view("r")}}},[t._v("入库记录")])],1),l("el-col",{attrs:{span:5}},[l("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.get_date_range},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),l("el-col",{attrs:{span:4}},[l("el-input",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1),l("el-col",{attrs:{span:2}},[l("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.to_excel("goods")}}},[t._v("数据导出")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{prop:"create_time",label:"时间"}}),l("el-table-column",{attrs:{prop:"num",label:"编号"}}),l("el-table-column",{attrs:{prop:"name",label:"物资名称"}}),l("el-table-column",{attrs:{prop:"stock",label:"数量"}}),l("el-table-column",{attrs:{prop:"model",label:"规格"}}),l("el-table-column",{attrs:{prop:"price",label:"单价(元)"}}),l("el-table-column",{attrs:{label:"合计金额(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(1*e.row.stock*e.row.price)+"\n\t\t\t\t\t\t")]}}],null,!0)}),l("el-table-column",{attrs:{prop:"massege",label:"备注"}}),l("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(l){return t.chuku(e.row)}}},[t._v("出库")]),l("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(l){return t.ruku(e.row)}}},[t._v("入库")]),l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(l){return t.edit_goods(e.row)}}},[t._v("修改")]),l("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(l){return t.del_goods(e.row.id)}}},[t._v("删除")])]}}],null,!0)})],1)]:t._e(),"c"==t.show_view?[l("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[l("el-col",{attrs:{span:2}},[l("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.all_goods}},[t._v("所有物资")])],1),l("el-col",{attrs:{span:5}},[l("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),l("el-col",{attrs:{span:4}},[l("el-select",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.car_list,(function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),l("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("搜索")]),l("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("重置")])],1),l("el-col",{attrs:{span:2}},[l("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.to_excel("crk")}}},[t._v("数据导出")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ck_record,border:""}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{prop:"create_time",label:"出库时间"}}),l("el-table-column",{attrs:{prop:"name",label:"物资名称"}}),l("el-table-column",{attrs:{prop:"num",label:"数量"}}),l("el-table-column",{attrs:{prop:"model",label:"规格"}}),l("el-table-column",{attrs:{prop:"price",label:"单价(元)"}}),l("el-table-column",{attrs:{label:"合计金额(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.num*e.row.price)+"\n\t\t\t\t\t\t")]}}],null,!0)}),l("el-table-column",{attrs:{prop:"use_car",label:"领用车辆"}}),l("el-table-column",{attrs:{prop:"user",label:"领用人"}}),l("el-table-column",{attrs:{prop:"msg",label:"备注"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(l){return t.del_record(e.row.id)}}},[t._v("删除")])]}}],null,!0)})],1)]:t._e(),"r"==t.show_view?[l("el-row",{staticStyle:{"text-align":"left","margin-bottom":"15px"}},[l("el-col",{attrs:{span:2}},[l("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.all_goods}},[t._v("所有物资")])],1),l("el-col",{attrs:{span:5}},[l("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}})],1),l("el-col",{attrs:{span:4}},[l("el-select",{staticStyle:{width:"45%"},attrs:{size:"mini",placeholder:"请输入搜索内容"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.car_list,(function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),l("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("搜索")]),l("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("重置")])],1),l("el-col",{attrs:{span:2}},[l("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.to_excel("crk")}}},[t._v("数据导出")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rk_record,border:""}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{prop:"create_time",label:"入库时间"}}),l("el-table-column",{attrs:{prop:"name",label:"物资名称"}}),l("el-table-column",{attrs:{prop:"num",label:"数量"}}),l("el-table-column",{attrs:{prop:"model",label:"规格"}}),l("el-table-column",{attrs:{prop:"price",label:"单价(元)"}}),l("el-table-column",{attrs:{label:"合计金额(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.num*e.row.price)+"\n\t\t\t\t\t\t")]}}],null,!0)}),l("el-table-column",{attrs:{prop:"user",label:"入库人"}}),l("el-table-column",{attrs:{prop:"massege",label:"备注"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(l){return t.del_record(e.row.id)}}},[t._v("删除")])]}}],null,!0)})],1)]:t._e()],2)})),1),l("el-dialog",{attrs:{title:t.is_chu?"出库":"入库",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[l("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:t.form,"label-width":"80px"}},[l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"物资名称:"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.form.name)+"\n\t\t\t\t\t")])],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"数量:"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.form.stock)+"\n\t\t\t\t\t")])],1)],1),l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"规格:"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.form.model)+"\n\t\t\t\t\t")])],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"单价(元):"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.form.price)+"\n\t\t\t\t\t")])],1)],1),l("el-form-item",{attrs:{label:t.is_chu?"出库数量":"入库数量"}},[l("el-input-number",{attrs:{min:1,max:t.is_chu?1*t.form.stock:999},on:{change:t.handleChange},model:{value:t.change_num,callback:function(e){t.change_num=e},expression:"change_num"}})],1),t.is_chu?l("el-form-item",{attrs:{label:"领用车辆:"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.form.car_id,callback:function(e){t.$set(t.form,"car_id",e)},expression:"form.car_id"}},t._l(t.car_list,(function(t){return l("el-option",{key:t.id,attrs:{label:t.car_num,value:t.id}})})),1)],1):t._e(),t.is_chu?t._e():l("el-form-item",{attrs:{label:"入库人:"}},[l("el-input",{model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1),t.is_chu?l("el-form-item",{attrs:{label:"领用人:"}},[l("el-input",{model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1):t._e(),l("el-form-item",{attrs:{label:"备注:"}},[l("el-input",{model:{value:t.form.msg,callback:function(e){t.$set(t.form,"msg",e)},expression:"form.msg"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t.is_chu?l("el-button",{attrs:{type:"primary"},on:{click:t.sub_ck}},[t._v("确 定")]):l("el-button",{attrs:{type:"primary"},on:{click:t.sub_rk}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:t.is_edit?"修改物资":"新增物资",visible:t.wp_dialog,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.wp_dialog=e}}},[l("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:t.form_wp,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"编号:"}},[l("el-input",{model:{value:t.form_wp.num,callback:function(e){t.$set(t.form_wp,"num",e)},expression:"form_wp.num"}})],1),l("el-form-item",{attrs:{label:"物资名称:"}},[l("el-input",{model:{value:t.form_wp.name,callback:function(e){t.$set(t.form_wp,"name",e)},expression:"form_wp.name"}})],1),l("el-form-item",{attrs:{label:"数量:"}},[l("el-input",{attrs:{disabled:t.is_edit},model:{value:t.form_wp.stock,callback:function(e){t.$set(t.form_wp,"stock",e)},expression:"form_wp.stock"}})],1),l("el-form-item",{attrs:{label:"物品规格:"}},[l("el-input",{model:{value:t.form_wp.model,callback:function(e){t.$set(t.form_wp,"model",e)},expression:"form_wp.model"}})],1),l("el-form-item",{attrs:{label:"物品单价:"}},[l("el-input",{model:{value:t.form_wp.price,callback:function(e){t.$set(t.form_wp,"price",e)},expression:"form_wp.price"}})],1),l("el-form-item",{attrs:{label:"备注:"}},[l("el-input",{model:{value:t.form_wp.massege,callback:function(e){t.$set(t.form_wp,"massege",e)},expression:"form_wp.massege"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.wp_dialog=!1}}},[t._v("取 消")]),t.is_edit?l("el-button",{attrs:{type:"primary"},on:{click:t.sub_edit_goods}},[t._v("确 定")]):l("el-button",{attrs:{type:"primary"},on:{click:t.sub_add_goods}},[t._v("确 定")])],1)],1)],1)},o=[],r=(l("a450"),{data:function(){return{get_img:this.$getimg,search_key:"",date_range:"",active:"1",is_edit:!1,group_id:"",tab_index:"",value:"",value1:"",show_view:"",group_list:[],car_list:[],ck_record:[],rk_record:[],change_num:0,is_chu:!0,form:{},form_wp:{},dialogVisible:!1,wp_dialog:!1,change_cate_list:{1:"车用物资",2:"人用物资"},cate_list:[{id:1,name:"车用物资"},{id:2,name:"人用物资"}],tableData:[]}},watch:{dialogVisible:function(t,e){t||(this.is_chu=!0,this.change_num=0)},wp_dialog:function(t,e){t||(this.form_wp={},this.is_edit=!1)},group_id:function(t,e){this.get_group_record(),this.get_group_goods()}},mounted:function(){this.get_all_group(),this.get_all_car()},methods:{to_excel:function(t){var e=localStorage.getItem("token"),l="",a="";l="goods"==t?"excel/export_parts?token=":"excel/export_parts_record?token=",a=this.get_img+l+e+"&group="+this.group_id,window.open(a)},search:function(){},get_date_range:function(t){console.log(t)},reset:function(){},sub_edit_goods:function(){var t=this;this.http.post_show("admin/parts/update_parts",this.form_wp).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.wp_dialog=!1,t.get_group_goods()}))},edit_goods:function(t){this.form_wp=t,this.is_edit=!0,this.wp_dialog=!0},del_goods:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/parts/del_parts?id="+t+"&department="+e.group_id).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.get_group_goods()}))}))},del_record:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.Del("admin/parts/del_parts_record?id="+t+"&department="+e.group_id).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.get_group_record(),e.dialogVisible=!1}))}))},get_all_car:function(){var t=this;this.http.get("admin/car/get_all_car").then((function(e){t.car_list=e.data}))},get_group_record:function(){var t=this;this.rk_record=[],this.ck_record=[],this.http.get("admin/parts/get_parts_record?group="+this.group_id).then((function(e){for(var l in e.data){var a=e.data[l];"入库"==a.type&&t.rk_record.push(a),"出库"==a.type&&t.ck_record.push(a)}console.log(t.rk_record),console.log(t.ck_record)}))},sub_rk:function(){var t=this;this.form.num=this.change_num,this.form.department=this.group_id,this.http.post_show("admin/parts/enter_parts",this.form).then((function(e){t.$message({type:"success",message:"入库成功!"}),t.get_group_goods(),t.get_group_record(),t.dialogVisible=!1}))},sub_ck:function(){var t=this;this.form.num=this.change_num,this.form.department=this.group_id,this.http.post_show("admin/parts/out_parts",this.form).then((function(e){t.$message({type:"success",message:"出库成功!"}),t.get_group_goods(),t.get_group_record(),t.dialogVisible=!1}))},sub_add_goods:function(){var t=this;this.form_wp.department=this.group_id,console.log(this.form_wp),this.http.post_show("admin/parts/add_type",this.form_wp).then((function(e){t.$message({type:"success",message:"添加成功!"}),t.wp_dialog=!1,t.get_group_goods()}))},get_all_group:function(){var t=this;this.http.get("admin/auth/group/get_group").then((function(e){t.group_list=e.data,t.group_id=e.data[0].id,t.get_group_goods(),t.get_group_record()}))},filterHandler:function(t,e,l){var a=l["property"];return e[a]===t},tab_change:function(t){console.log(t),this.active=t.name,this.show_view="",this.tab_index=1*t.index,this.group_id=this.group_list[1*t.index].id,this.get_group_goods()},get_group_goods:function(){var t=this;this.http.get("admin/parts/get_parts?group="+this.group_id).then((function(e){t.tableData=e.data}))},all_goods:function(){this.show_view=""},change_view:function(t){this.show_view=t},add_wp:function(){this.wp_dialog=!0},handleChange:function(t){console.log(t)},chuku:function(t){this.form=t,this.dialogVisible=!0},ruku:function(t){this.is_chu=!1,this.form=t,this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1,this.wp_dialog=!1}}}),i=r,s=l("cba8"),n=Object(s["a"])(i,a,o,!1,null,null,null);e["default"]=n.exports}}]);